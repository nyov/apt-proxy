apt-proxy (1.3.2.3pre2) unstable; urgency=low

  * Fix section typo in apt-proxy manpage (closes: #151208)
  * Download compressed Packages.gz from rsync backend if no local file is
    available.  Thanks to Roland Gerlach for the analysis.
  * Update apt-proxy.conf with many more examples and http backends by default
  * Fix apt-proxy-import help message, thanks Cristian Ionescu-Idbohrn
    (closes: #152166)
  * Fix chaining of multiple apt-proxies, thanks Brian Johnson 
    (closes: #153893)
  * Allow Release.gpg (closes: #153234)
  * Mention that new developments are going into version 2 in README

 -- Chris Halls <chris.halls@gmx.de>  Wed, 24 Jul 2002 16:04:59 +0200

apt-proxy (1.3.2) unstable; urgency=low

  * Depend on binutils for ar (closes: #143573)
  * Accept '~' characters in URLs
  * Clean up URLs used internally
  * apt-proxy-import: copy files instead of linking if using dpkg-name from
    Potato
  * Copy links to .debs as files, not links on rysnc backends.  This made it
    impossible to download some potato .debs on ftp.de.debian.org.
  * Refuse to run apt-proxy as the root user.  This is not a good idea
    security-wise.
  * Check for write permission in backend directories
  * Add debug option (-D) to apt-proxy-import that leaves the contents of
    dpkg-name.links directory.
  * Manuel Estrada Sainz: 
    - convert /dirname/../ into / (closes: #149166)
    - let apt-proxy-import accept relative pathnames (closes: #149200)
    - delete aptproxy user in postrm (closes: #148383)

 -- Chris Halls <chris.halls@gmx.de>  Fri, 14 Jun 2002 17:05:35 +0200

apt-proxy (1.3.1) unstable; urgency=low

  * Accept requests in the form http://<hostname>/... to comply with
    HTTP 1.1 (closes: #141740)
  * Manuel Estrada Sainz: update apt-proxy-import manpage using
    help2man; add help2man to build-depends
  * Add usage example in apt-proxy-import manpage for importing apt-move cache
  * Make apt-proxy-import output nicer when importing many directories
  * Update README with new hints and tips
  * Small apt-proxy.conf manpage correction

 -- Chris Halls <chris.halls@gmx.de>  Fri, 12 Apr 2002 13:26:36 +0200

apt-proxy (1.3.0) unstable; urgency=low

  * Release new version into Debian archive.
    - Add HTTP/FTP backend support using wget
    - Add apt-proxy-import, a script to import .debs into the cache
    - Improve reliability when several clients are active
    - Add FAQ section to README
    See the changelogs for 1.2.9.x (below) for details. 
    (closes: #83199, #94226, #140348, #140826)

 -- Chris Halls <chris.halls@gmx.de>  Thu,  4 Apr 2002 14:06:05 +0200

apt-proxy (1.2.9.11) sourceforge; urgency=low

  * Fix log messages when a directory is created for a http/ftp backend.
  * Clean up some other log messages

 -- Chris Halls <chris.halls@gmx.de>  Thu,  4 Apr 2002 12:42:50 +0200

apt-proxy (1.2.9.10) sourceforge; urgency=low

  * Update installation instructions for non-Debian systems
  * Add check that stat supports -t option (thanks to Oliver Bornet)
  * Suggest stat and update description

 -- Chris Halls <chris.halls@gmx.de>  Thu,  4 Apr 2002 08:51:34 +0200

apt-proxy (1.2.9.9) sourceforge; urgency=low

  * Add --quiet option to adduser until #141016 is fixed (closes: #140826)
  * Update README

 -- Chris Halls <chris.halls@gmx.de>  Wed,  3 Apr 2002 11:19:51 +0200

apt-proxy (1.2.9.8) sourceforge; urgency=low

  * Add a FAQ section to README with some problems that users have
    encountered.
  * apt-get update && apt-get update now sends 304 HITs the second time for
    HTTP backends like it does for rsync
  * Change HTTP protocol version to 1.1 (it was still 1.0!)
  * Don't copy an older version using copy_best_match when using wget
  * Turn on KEEP_STATS when DEBUG is on
  * In debug mode, log lockfile release
  * Fix some error messages when file is already current version
  * Rename some rsync* functions to download* to make it less confusing

 -- Chris Halls <chris.halls@gmx.de>  Tue,  2 Apr 2002 18:14:18 +0200

apt-proxy (1.2.9.7) sourceforge; urgency=low

  * Fix file ownership changing bug in apt-proxy-import.  If you've used
    earlier versions, you may find files with owner root in
    /var/cache/apt-proxy - do "chown -R aptproxy /var/cache/apt-proxy" to
    restore normality.  This was the cause of "touch: permission denied"
    errors in the logfile.
  * Remove some debugging statements in apt-proxy

 -- Chris Halls <chris.halls@gmx.de>  Wed, 27 Mar 2002 18:21:42 +0100

apt-proxy (1.2.9.6) sourceforge; urgency=low

  * Fix race if two clients request the same file, with help from Sacha to
    reproduce. (closes: #140348)
  * I would like to upload to Debian unstable once 1.2.2 hits Woody in 5 days.
    Please let me know if you are aware of any remaining issues!

 -- Chris Halls <chris.halls@gmx.de>  Wed, 27 Mar 2002 16:16:52 +0100

apt-proxy (1.2.9.5) sourceforge; urgency=low

  * Fix directory support so apt-proxies can be chained again
  * Add apt-proxy --version (thanks to Sacha Schlegel)

 -- Chris Halls <chris.halls@gmx.de>  Mon, 25 Mar 2002 16:33:51 +0100

apt-proxy (1.2.9.4) sourceforge; urgency=low

  * Merge in changes from stable 1.2.2
  * Add dpkg-name support to apt-proxy-import so it renames files too
  * Log copy_best_match to help Sascha to fix the problem he found :)

 -- Chris Halls <chris.halls@gmx.de>  Fri, 22 Mar 2002 17:07:57 +0100

apt-proxy (1.2.9.3) sourceforge; urgency=low

  * Always use ash instead of sh, because this makes apt-proxy much faster.
  * Fix ftp backend permission problem
  * If a file to be downloaded was not newer, wget would not download a file
    and the apt client would receive a zero length file.
  * Return an error if a file does not exist on any server
  * Add fuzzy matching to apt-proxy-import by ranty, which enables it to guess
    where a .deb file should go even if the Packages files do not contain the
    exact version.  Only works for new style pool directories, and is not yet
    documented.

 -- Chris Halls <chris.halls@nikocity.de>  Mon, 11 Mar 2002 17:14:35 +0100

apt-proxy (1.2.9.2) sourceforge; urgency=low

  * Only download uncompressed packages files when rsyncing.  Do not attempt
    to get uncompressed sources, release or contents files.  When downloading
    uncompressed files with rsync, use compress switch (closes: #94226)
  * Fix lockfile name used during clean sweep.  Thanks to Lele Gaifax for the
    patch.
  * Fix an error where stale lockfiles were not deleted

 -- Chris Halls <chris.halls@nikocity.de>  Wed,  6 Mar 2002 15:37:09 +0100

apt-proxy (1.2.9.1) sourceforge; urgency=low

  * Add http/ftp support using wget. (closes: #83199)
  * New script: apt-proxy-import, which will import .debs into the archive.

 -- Chris Halls <chris.halls@nikocity.de>  Tue, 26 Feb 2002 14:46:49 +0100

apt-proxy (1.2.2) unstable; urgency=low

  * Fix lockfile name in sweep clean (thanks to Lele Gaifax)
  * Change maintainer email address (closes: #139173)
  * Add Manuel Estrada Sainz <ranty@debian.org> to Uploaders.  He has
    been helping improve apt-proxy-import and will sponsor future uploads.

 -- Chris Halls <chris.halls@gmx.de>  Thu, 21 Mar 2002 18:13:30 +0100

apt-proxy (1.2.1) unstable; urgency=low

  * Reset access time on version n-1 when downloading n, so the cache cleaning
    algorithm works better (came up in the discussion for bug #131883)
  * Add Contents-* to list of control files, so apt-proxy works with apt-file.
    (closes: #134217)
  * Add version to debhelper build dependency (>> 3.0.0)
  * On purge, remove the cache directory
  * Make it possible to install on Potato again by removing --diabled-login
    and --shell from adduser invocation.  They are on by default for a system
    user anyway. (Sourceforge bug #516318)
  * Add note to README about usage on Potato
  * Make Debian native

 -- Chris Halls <chris.halls@nikocity.de>  Thu, 21 Feb 2002 18:47:08 +0100

apt-proxy (1.2.0-1) unstable; urgency=low

  * New upstream release
    - New config file paramter, MAX_VERSIONS, to limit the number of package
      versions to keep in the cache directory.  Thanks to Martin Schwenke.
    - New parameters for apt-proxy for runtime setting of config file and log
      file locations.  Thanks to Gerhard Muntingh. (closes: #77929)
    - Use the package filelists logic from Martin Schwenke to send the size of
      package files before downloading, meaning connection keep-alive logic can
      be used.
    - Fix the problem of files being corrupted during streaming (often seen as
      a MD5 sum error which would go away when the file was requested from
      apt-proxy again), by switching back to using dd instead of tail.
    - Check for corrupted .deb and .gz files in the cache before sending
      them to the client. (closes: #132493)
    - Bye bye .diff: The Sourceforge project is now up to date and includes the
      debian packaging.
  * Really rename main archive name, not just put it in the changelog
  * Add logrotate script
  * Clean up debian/rules and use DH_COMPAT=3
  * If setting up apt-proxy for the first time, do the following:
    - Create a user, aptproxy (closes: #99259)
    - Add an entry to inetd.conf, without disabling it (closes: #81746)
    - Create a log file owned by the user (closes: #109308)
    This is currently first-install only.  I plan to introduce an upgrade path
    for existing users using debconf when I have time.
  * Move installation instructions that are no longer necessary when using the
    packge into a seperate file, INSTALL.
  * Remove extra manual installation instructions that are no longer necessary
    from README (closes: #132439)
  * Merge remaining information from README about finding rsync servers into
    apt-proxy.conf manpage.
  * Add UK rsync servers to default apt-proxy.conf, thanks to Simon Huggins.

 -- Chris Halls <chris.halls@nikocity.de>  Wed,  6 Feb 2002 12:20:12 +0100

apt-proxy (1.1.2-2) unstable; urgency=low

  * Add updated README to .deb, thanks to Thorsten Gunkel for pointing
    this out and other suggestions.
  * Changed main archive name from debian to main in apt-proxy.conf to make it
    less confusing.
  * Documented RSYNC_TIMEOUT in apt-proxy.conf manpage.
  * Minor changes to apt-proxy manpage.  The manpages will get a proper
    overhaul once the installation has been modified to create the user and
    cache directories.
  * Add a couple more rsync servers to default apt-proxy.conf
  * Add debian/TODO

 -- Chris Halls <chris.halls@nikocity.de>  Wed, 09 Jan 2002 22:53:58 +0100

apt-proxy (1.1.2-1) unstable; urgency=low

  * New maintainter - thanks to Andrew McMillan for sponsoring.
    (closes: #123499)
  * New upstream release (closes: #112029)
     - Some bug fixes, bashism cleanups
     - Upstream has been inactive for 6 months now.  I have not had
       any contact since September.
  * Add Depends: grep-dctrl
    (closes: #76113, #78256, #114855, #99976, #121456)
  * Remove unneeded procmail dependency (closes: #76634, #116188)
  * No longer depend on bash.
  * Depend on netbase for update-inetd (closes: #75993)
  * Remove Recommends:ftp-server
  * Merged in Stephen Rothwell's changes
     - Use tail and stat if available, which is faster
  * Supply a working apt-proxy.conf (part of bug #96517).  Set the top level
    cache directory to /var/cache/apt-proxy and supply it as part of the
    package.  To get this package running now, you only need to create the
    user and logfile and enable the service in inetd.  I'll fix these in a
    future release.
  * Made improvements to the script:
     - Fix keep-alive handling: If apt-proxy knows the file size, the
       connection is kept open, otherwise it is closed. Also, fix hangs in
       certain situations by improving locking and only keep the connection
       alive if asked by the client. (closes: #96517, #80839,
       #99927, #99948)
     - Add rsync timeout support in config file (RSYNC_TIMEOUT parameter)
     - Create cache second level directory if it does not exist
     - Rework file locking
     - Improve debug logging to help investigate remaining problems.
  * Fix typo in apt-proxy.8, thanks to Uwe Hermann (closes: #116234)
  * Updated Standards-Version (no changes were necessary)
  * README: Added instructions for creating apt-proxy.conf and outline the
    steps needed to get apt-proxy working.

 -- Chris Halls <chris.halls@nikocity.de>  Tue, 18 Dec 2001 08:34:57 +0100

apt-proxy (1.1.1-2) unstable; urgency=high

  * Dependency problem on netkit-inetd removed (thx goes to Lindsay Allen)

 -- Raphael Bossek <bossekr@debian.org>  Wed,  1 Nov 2000 10:37:04 +0100

apt-proxy (1.1.1-1) unstable; urgency=low

  * New upstream version (closes: #74653)
  * Pre-Depends on debconf removed. (closes: #65662)

 -- Raphael Bossek <bossekr@debian.org>  Sun, 29 Oct 2000 10:26:06 +0100

apt-proxy (0.4-3) unstable; urgency=low

  * Added check for the existence of /etc/apt-proxy. (closes: #58180)

 -- Raphael Bossek <bossekr@debian.org>  Tue,  7 Mar 2000 22:57:28 +0100

apt-proxy (0.4-2) unstable; urgency=low

  * Recomends ftp-server. (closes: #58117, #58148)

 -- Raphael Bossek <bossekr@debian.org>  Wed, 16 Feb 2000 20:54:48 +0100

apt-proxy (0.4-1) unstable; urgency=low

  * New upstream version.

 -- Raphael Bossek <bossekr@debian.org>  Fri,  4 Feb 2000 20:33:42 +0100

