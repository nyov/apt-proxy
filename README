                 	apt-proxy README

              Chris Halls <chris.halls@gmx.de>

This is part of the Debian GNU/Linux package for apt-proxy.

If you have installed apt-proxy using the Debian package, you now need to
do the following:

1. Edit apt-proxy.conf to select the nearest backend servers for you.  See
   the apt-proxy.conf(5) manpage for details.
2. Point your apt clients to the proxy.  See the apt-proxy(8) manpage for
   details.
3. run apt-get update on a client, to initialise the archive directories and
   filelists.
4. If you have an apt cache directory full of .debs, you can use
   apt-proxy-import(8) to copy them into the apt-proxy archive.

If you are installing from the source tar.gz, for example on a non-Debian
machine, have a look at INSTALL for manual installation instructions.

Using apt-proxy with Debian Potato
----------------------------------
Since I modified the build scripts to use debhelper 3, it is no longer possible
to build this package on Potato.  However, you can still install and use a
package that has been built on a Woody system, or downloaded from the Woody
archives.  (Thanks to Thorsten Gunkel for testing this and other aspects of the
package.)

Frequently Asked Questions
--------------------------
Here are some of the issues that have been raised about apt-proxy:

- Initial configuration -

Q: apt-proxy refuses to serve files and apt reports 500 Bad Configuration

A: There is a problem with the syntax in an add_backend line in apt-proxy.conf.
   One common mistake is to try to comment out a line which is continued from
   the last line:
   
   add_backend /main/                 \
   $APT_PROXY_CACHE/debian/           \
   #       ftp.us.debian.org::debian/ \    <---- This does not work
	   ftp.de.debian.org::debian/ 

   You should either delete the line, or move it further down to follow a line
   that does not end in a backslash.

- Client setup -

Q: A connection cannot be established with apt-proxy on a remote machine.
   Nothing appears in the apt-proxy.log file.

A: apt-proxy is run by tcpd, which may deny connections depending on how it is
   set up.  If a connection is denied by tcpd, you will find a log message in
   /var/log/daemon.log such as:
       apt-proxy[nnnn]: refused connect from <hostname>

   You should check /etc/hosts.allow and hosts.deny.  For example, the standard
   ALL: PARANOID in /etc/hosts.deny will deny acess to clients whose hostname
   cannot be looked up.

April 2002
