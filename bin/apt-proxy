#!/usr/bin/python2.3

from twisted.internet.app import Application
import apt_proxy.apt_proxy
from apt_proxy.apt_proxy_conf import factoryConfig
from apt_proxy.apt_proxy import Factory
from twisted.manhole.telnet import ShellFactory

factory = Factory()
shell = ShellFactory()

factoryConfig(factory, shell)

application = Application("AptProxy")
application.listenTCP(factory.proxy_port, factory)
if shell.port:
    application.listenTCP(shell.port, shell)


if __name__ == '__main__':
    #Sorry moshez, but I don't jet feel confortable with twistd
    application.run(0)
